<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Assistant - AI-Powered Assistant</title>
    <link rel="icon" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/icons/mortarboard-fill.svg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style id="app-style">
        :root {
            --primary-color: #5e72e4;
            --secondary-color: #8392ab;
            --success-color: #2dce89;
            --info-color: #11cdef;
            --warning-color: #fb6340;
            --danger-color: #f5365c;
            --light-color: #f8f9fa;
            --dark-color: #172b4d;
            --background-light: #f8f9fe;
            --background-dark: #1e2533; /* Updated from #1a202c for better viewing */
            --text-light: #525f7f;
            --text-dark: #ffffff; /* Updated from #e5e7eb to pure white for better visibility */
            --card-light: #ffffff;
            --card-dark: #2a3142; /* Updated from #2d3748 for better contrast */
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-light);
            color: var(--text-light);
            transition: var(--transition);
        }

        body.dark-mode {
            background-color: var(--background-dark);
            color: var(--text-dark); /* This now uses pure white */
        }
        
        .navbar {
            background-color: var(--card-light);
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        body.dark-mode .navbar {
            background-color: var(--card-dark);
        }

        /* Ensure navbar text is visible in dark mode */
        body.dark-mode .navbar-nav .nav-link {
            color: white;
        }

        .main-content {
            min-height: calc(100vh - 70px);
            padding-top: 2rem;
        }

        .card {
            border-radius: 10px;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            background-color: var(--card-light);
            height: 100%;
        }

        body.dark-mode .card {
            background-color: var(--card-dark);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            background-image: linear-gradient(to bottom, #2a3142, #242b3d);
        }

        .feature-card {
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        .btn-sm{
            padding: 0.55rem;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .form-control {
            border-radius: 7px;
            padding: 0.75rem 1rem;
        }

        body.dark-mode .form-control {
            background-color: #303950;
            border-color: #4a5568;
            color: white; /* Updated from var(--text-dark) to explicitly use white */
        }

        /* New CSS for dark mode enhancements on form elements */
        body.dark-mode .form-control::placeholder {
            color: rgba(255, 255, 255, 0.6); /* Lighter color for placeholders */
        }

        body.dark-mode select.form-select {
            background-color: #303950;
            border-color: #4a5568;
            color: white;
        }

        body.dark-mode select.form-select option {
            background-color: #303950;
            color: white;
        }

        body.dark-mode .btn-outline-danger {
            color: white;
        }

        body.dark-mode .form-upload button {
            color: white;
        }

        body.dark-mode .input-group .btn-outline-secondary {
            color: white;
            border-color: #4a5568;
        }

        body.dark-mode .input-group .btn-outline-secondary:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        body.dark-mode #clear-storage-btn {
            color: #f5365c;
        }

        .hero-section {
            padding: 5rem 0;
            background: linear-gradient(to right, #5e72e4, #825ee4);
            color: white;
            margin-bottom: 3rem;
        }

        .feature-section {
            padding: 4rem 0;
        }

        .section-title {
            margin-bottom: 2.5rem;
        }

        .login-card {
            max-width: 400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .dashboard-sidebar {
            position: fixed;
            height: 100%;
            border-right: 1px solid rgba(0, 0, 0, 0.1);
            width: 250px;
            transition: var(--transition);
            background-color: var(--card-light);
            padding-top: 2rem;
        }

        body.dark-mode .dashboard-sidebar {
            background-color: var(--card-dark);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dashboard-main {
            margin-left: 250px;
            padding: 2rem;
            transition: var(--transition);
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: var(--text-light);
            text-decoration: none;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: var(--transition);
        }

        /* Improve sidebar text visibility */
        body.dark-mode .sidebar-link {
            color: white; /* Updated from var(--text-dark) to white */
        }

        .sidebar-link:hover, .sidebar-link.active {
            background-color: rgba(94, 114, 228, 0.1);
            color: var(--primary-color);
        }

        .sidebar-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 70vh;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            margin-bottom: 0.5rem;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: white;
            border-top-right-radius: 0.25rem;
        }

        .bot-message {
            align-self: flex-start;
            background-color: #f1f1f1;
            color: #333;
            border-top-left-radius: 0.25rem;
        }

        body.dark-mode .bot-message {
            background-color: #4a5568;
            color: white; /* Updated from #f8f9fe to white */
        }

        .chat-input {
            padding: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .flashcard {
            perspective: 1000px;
            height: 200px;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            padding: 1rem;
        }

        .flashcard-front {
            background-color: #5e72e4;
            color: white;
        }

        .flashcard-back {
            background-color: #f8f9fa;
            color: #333;
            transform: rotateY(180deg);
        }

        body.dark-mode .flashcard-back {
            background-color: #4a5568;
            color: white; /* Updated from #f8f9fe to white */
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-option {
            padding: 1rem;
            margin-bottom: 0.5rem;
            border: 1px solid #e9ecef;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .quiz-option:hover {
            background-color: rgba(94, 114, 228, 0.1);
        }

        .quiz-option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        body.dark-mode .quiz-option {
            border-color: #4a5568;
        }

        /* Mobile Responsive */
        @media (max-width: 992px) {
            .dashboard-sidebar {
                transform: translateX(-100%);
                z-index: 1000;
            }

            .dashboard-sidebar.show {
                transform: translateX(0);
            }

            .dashboard-main {
                margin-left: 0;
            }
        }

        .mobile-toggle {
            display: none;
        }

        @media (max-width: 992px) {
            .mobile-toggle {
                display: block;
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background-color: var(--primary-color);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                z-index: 1001;
                cursor: pointer;
            }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        .loading-spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 0.25rem solid rgba(94, 114, 228, 0.25);
            border-right-color: var(--primary-color);
            border-radius: 50%;
            animation: spinner 0.75s linear infinite;
        }

        @keyframes spinner {
            to {
                transform: rotate(360deg);
            }
        }

        .form-upload {
            border: 2px dashed #ddd;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .form-upload:hover {
            border-color: var(--primary-color);
        }

        body.dark-mode .form-upload {
            border-color: #4a5568;
        }

        body.dark-mode .form-upload:hover {
            border-color: var(--primary-color);
        }

        .settings-toggle {
            width: 60px;
            height: 30px;
            background-color: #e9ecef;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            transition: var(--transition);
        }

        .settings-toggle.active {
            background-color: var(--primary-color);
        }

        .toggle-handle {
            width: 26px;
            height: 26px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: var(--transition);
        }

        .settings-toggle.active .toggle-handle {
            left: 32px;
        }

        /* Dark Mode Enhancements */
        body.dark-mode .card {
            background-color: var(--card-dark);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            background-image: linear-gradient(to bottom, #2a3142, #242b3d);
        }

        body.dark-mode .sidebar-link:hover, 
        body.dark-mode .sidebar-link.active {
            background-color: rgba(94, 114, 228, 0.2); /* More visible in dark mode */
            color: #8ab4f8; /* Brighter color for active links */
        }

        body.dark-mode .card {
            color: white;
        }

        body.dark-mode .feature-icon {
            color: var(--primary-color);
        }

        body.dark-mode .login-card a {
            color: #8ab4f8; /* Brighter blue for dark mode */
            text-decoration: none;
        }

        body.dark-mode .login-card a:hover {
            text-decoration: underline;
        }

        body.dark-mode .btn:not(.btn-outline-primary) {
            color: white;
        }

        body.dark-mode .form-label {
            color: #e5e7eb;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg" id="main-navbar">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="#" data-view="landing">
                    <i class="bi bi-book-half me-2 text-primary"></i>
                    <span class="fw-bold">Study Assistant</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarContent">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-view="landing">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-view="features">Features</a>
                        </li>
                        <li class="nav-item" id="login-nav-item">
                            <a class="nav-link" href="#" data-view="login">Login</a>
                        </li>
                        <li class="nav-item" id="signup-nav-item">
                            <a class="nav-link" href="#" data-view="signup">Sign Up</a>
                        </li>
                        <li class="nav-item d-none" id="dashboard-nav-item">
                            <a class="nav-link" href="#" data-view="dashboard">Dashboard</a>
                        </li>
                        <li class="nav-item d-none" id="logout-nav-item">
                            <a class="nav-link" href="#" id="logout-link">Logout</a>
                        </li>
                        <li class="nav-item ms-2">
                            <button class="btn btn-sm rounded-circle" id="theme-toggle">
                                <i class="bi bi-moon-fill"></i>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Landing Page -->
            <div class="view active" id="landing-view">
                <div class="hero-section">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-lg-6">
                                <h1 class="display-4 fw-bold mb-4">Unlock Your Learning Potential with AI</h1>
                                <p class="lead mb-4">Study Assistant uses advanced AI to help you learn more efficiently, understand complex topics, and prepare for exams with ease.</p>
                                <div class="d-flex gap-3">
                                    <a href="#" class="btn btn-light btn-lg" data-view="signup">Get Started</a>
                                    <a href="#" class="btn btn-outline-light btn-lg" data-view="features">Learn More</a>
                                </div>
                            </div>
                            <div class="col-lg-6 d-none d-lg-block">
                                <div class="text-center">
                                    <i class="bi bi-mortarboard-fill text-white" style="font-size: 200px; opacity: 0.8;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container">
                    <div class="section-title text-center">
                        <h2 class="fw-bold">How Study Assistant Helps You Succeed</h2>
                        <p class="lead">Powerful AI tools designed specifically for students</p>
                    </div>

                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="card feature-card h-100">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-file-earmark-text feature-icon"></i>
                                    <h4>Note Summarizer</h4>
                                    <p>Turn lengthy notes or textbook chapters into concise, easy-to-understand summaries.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card feature-card h-100">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-chat-dots feature-icon"></i>
                                    <h4>Study Chatbot</h4>
                                    <p>Ask questions about any topic and get instant, accurate answers to clarify your understanding.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card feature-card h-100">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-card-heading feature-icon"></i>
                                    <h4>Flashcard Generator</h4>
                                    <p>Automatically create effective flashcards from your study materials for better memorization.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card feature-card h-100">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-question-circle feature-icon"></i>
                                    <h4>Quiz Generator</h4>
                                    <p>Generate personalized quizzes to test your knowledge and identify areas for improvement.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card feature-card h-100">
                                <div class="card-body text-center p-4">
                                    <i class="bi bi-file-earmark-pdf feature-icon"></i>
                                    <h4>PDF Processing</h4>
                                    <p>Upload PDFs and instantly process them with any of our tools for seamless studying.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-5">
                        <a href="#" class="btn btn-primary btn-lg" data-view="signup">Start Your Learning Journey</a>
                    </div>
                </div>
            </div>

            <!-- Features Page -->
            <div class="view" id="features-view">
                <div class="container">
                    <div class="section-title text-center">
                        <h2 class="fw-bold">Features That Transform Your Study Experience</h2>
                        <p class="lead">Explore the complete suite of AI-powered tools designed for modern learning</p>
                    </div>

                    <div class="row g-4 mb-5">
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body p-4">
                                    <h3 class="card-title"><i class="bi bi-file-earmark-text text-primary me-2"></i> Note Summarizer</h3>
                                    <p class="card-text">Our advanced AI analyzes your notes or textbook content and generates clear, concise summaries that capture the most important information. Perfect for:</p>
                                    <ul>
                                        <li>Exam preparation</li>
                                        <li>Processing lengthy textbook chapters</li>
                                        <li>Creating study guides</li>
                                        <li>Reviewing key concepts quickly</li>
                                    </ul>
                                    <p>Simply paste your text or upload a PDF, and our AI will identify the most crucial points and organize them into a coherent summary.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body p-4">
                                    <h3 class="card-title"><i class="bi bi-chat-dots text-primary me-2"></i> Study Chatbot</h3>
                                    <p class="card-text">Get instant answers to your academic questions with our AI-powered study assistant. Our chatbot can:</p>
                                    <ul>
                                        <li>Explain complex concepts in simple terms</li>
                                        <li>Provide examples to illustrate difficult ideas</li>
                                        <li>Answer follow-up questions for deeper understanding</li>
                                        <li>Reference your uploaded materials for context-aware help</li>
                                    </ul>
                                    <p>The chatbot learns from your interactions to provide increasingly personalized responses tailored to your learning style.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body p-4">
                                    <h3 class="card-title"><i class="bi bi-card-heading text-primary me-2"></i> Flashcard Generator</h3>
                                    <p class="card-text">Create effective study flashcards without the manual work. Our AI tool:</p>
                                    <ul>
                                        <li>Identifies key terms and concepts from your materials</li>
                                        <li>Creates question-answer pairs designed for optimal learning</li>
                                        <li>Organizes flashcards by topic for structured review</li>
                                        <li>Allows customization and editing of generated cards</li>
                                    </ul>
                                    <p>Use the interactive flashcard system to test your recall and track your progress as you master the material.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card h-100">
                                <div class="card-body p-4">
                                    <h3 class="card-title"><i class="bi bi-question-circle text-primary me-2"></i> Quiz Generator</h3>
                                    <p class="card-text">Test your knowledge with customized quizzes created from your study materials. The quiz generator:</p>
                                    <ul>
                                        <li>Creates multiple-choice, true/false, and short answer questions</li>
                                        <li>Focuses on the most important concepts</li>
                                        <li>Provides explanations for correct answers</li>
                                        <li>Adjusts difficulty based on your performance</li>
                                    </ul>
                                    <p>Regular quizzing helps reinforce learning and identify areas where you need more focus.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card h-100">
                                <div class="card-body p-4">
                                    <h3 class="card-title"><i class="bi bi-file-earmark-pdf text-primary me-2"></i> PDF Processing</h3>
                                    <p class="card-text">Upload any PDF document and process it with our full suite of tools. Our PDF processor:</p>
                                    <ul>
                                        <li>Extracts text accurately from various PDF formats</li>
                                        <li>Preserves document structure for better analysis</li>
                                        <li>Works with textbooks, lecture slides, research papers, and more</li>
                                        <li>Integrates directly with all other tools in the platform</li>
                                    </ul>
                                    <p>This seamless integration means you can upload a textbook chapter and immediately generate summaries, flashcards, quizzes, or ask the chatbot questions about the content.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-5">
                        <div class="card-body p-4">
                            <h3 class="card-title text-center">Additional Features</h3>
                            <div class="row g-4 mt-3">
                                <div class="col-md-4">
                                    <div class="d-flex">
                                        <div class="me-3">
                                            <i class="bi bi-moon-stars fs-3 text-primary"></i>
                                        </div>
                                        <div>
                                            <h5>Dark Mode</h5>
                                            <p>Reduce eye strain during late-night study sessions with our elegant dark theme.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex">
                                        <div class="me-3">
                                            <i class="bi bi-phone fs-3 text-primary"></i>
                                        </div>
                                        <div>
                                            <h5>Responsive Design</h5>
                                            <p>Study seamlessly across all your devices, from desktop to mobile.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex">
                                        <div class="me-3">
                                            <i class="bi bi-cloud-arrow-up fs-3 text-primary"></i>
                                        </div>
                                        <div>
                                            <h5>Cloud Storage</h5>
                                            <p>Your study materials and generated content are securely stored for easy access.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mb-5">
                        <a href="#" class="btn btn-primary btn-lg" data-view="signup">Join Study Assistant Today</a>
                    </div>
                </div>
            </div>

            <!-- Login Page -->
            <div class="view" id="login-view">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <div class="card login-card">
                                <div class="card-body">
                                    <h2 class="text-center mb-4">Welcome Back</h2>
                                    <form id="login-form">
                                        <div class="mb-3">
                                            <label for="login-email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="login-email" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="login-password" class="form-label">Password</label>
                                            <input type="password" class="form-control" id="login-password" required>
                                            <div class="mt-2 text-end">
                                                <a href="#" class="small text-decoration-none">Forgot password?</a>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button type="submit" class="btn btn-primary">Login</button>
                                        </div>
                                        <div class="text-center mt-3">
                                            <span>Don't have an account? </span>
                                            <a href="#" data-view="signup" class="text-decoration-none">Sign up</a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sign Up Page -->
            <div class="view" id="signup-view">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <div class="card login-card">
                                <div class="card-body">
                                    <h2 class="text-center mb-4">Create Your Account</h2>
                                    <form id="signup-form">
                                        <div class="mb-3">
                                            <label for="signup-name" class="form-label">Full Name</label>
                                            <input type="text" class="form-control" id="signup-name" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="signup-email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="signup-email" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="signup-password" class="form-label">Password</label>
                                            <input type="password" class="form-control" id="signup-password" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="signup-confirm-password" class="form-label">Confirm Password</label>
                                            <input type="password" class="form-control" id="signup-confirm-password" required>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button type="submit" class="btn btn-primary">Sign Up</button>
                                        </div>
                                        <div class="text-center mt-3">
                                            <span>Already have an account? </span>
                                            <a href="#" data-view="login" class="text-decoration-none">Login</a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard -->
            <div class="view" id="dashboard-view">
                <div class="dashboard-sidebar" id="sidebar">
                    <div class="px-4 mb-4">
                        <h5>Study Assistant</h5>
                    </div>
                    <div class="sidebar-menu">
                        <a href="#" class="sidebar-link active" data-dashboard-view="dashboard-home">
                            <i class="bi bi-house sidebar-icon"></i> Dashboard
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="summarizer">
                            <i class="bi bi-file-earmark-text sidebar-icon"></i> Note Summarizer
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="chatbot">
                            <i class="bi bi-chat-dots sidebar-icon"></i> Study Chatbot
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="flashcards">
                            <i class="bi bi-card-heading sidebar-icon"></i> Flashcards
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="quiz">
                            <i class="bi bi-question-circle sidebar-icon"></i> Quiz Generator
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="pdf">
                            <i class="bi bi-file-earmark-pdf sidebar-icon"></i> PDF Upload
                        </a>
                        <a href="#" class="sidebar-link" data-dashboard-view="settings">
                            <i class="bi bi-gear sidebar-icon"></i> Settings
                        </a>
                    </div>
                </div>

                <div class="dashboard-main">
                    <!-- Dashboard Home -->
                    <div class="dashboard-view active" id="dashboard-home-view">
                        <h2 class="mb-4">Welcome, <span id="user-name">Student</span>!</h2>
                        <div class="row g-4">
                            <div class="col-md-6 col-xl-3">
                                <div class="card feature-card h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-file-earmark-text feature-icon"></i>
                                        <h4>Note Summarizer</h4>
                                        <p>Condense lengthy notes into concise summaries</p>
                                        <a href="#" class="btn btn-primary mt-2" data-dashboard-view="summarizer">Use Tool</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="card feature-card h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-chat-dots feature-icon"></i>
                                        <h4>Study Chatbot</h4>
                                        <p>Get answers to your study questions</p>
                                        <a href="#" class="btn btn-primary mt-2" data-dashboard-view="chatbot">Use Tool</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="card feature-card h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-card-heading feature-icon"></i>
                                        <h4>Flashcards</h4>
                                        <p>Create and study with AI-generated flashcards</p>
                                        <a href="#" class="btn btn-primary mt-2" data-dashboard-view="flashcards">Use Tool</a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-xl-3">
                                <div class="card feature-card h-100">
                                    <div class="card-body text-center p-4">
                                        <i class="bi bi-question-circle feature-icon"></i>
                                        <h4>Quiz Generator</h4>
                                        <p>Test your knowledge with custom quizzes</p>
                                        <a href="#" class="btn btn-primary mt-2" data-dashboard-view="quiz">Use Tool</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title">Quick PDF Upload</h4>
                                        <p>Upload a PDF to process with any of our tools</p>
                                        <div class="form-upload" id="dashboard-dropzone">
                                            <i class="bi bi-cloud-arrow-up fs-1 mb-2"></i>
                                            <h5>Drag & Drop Your PDF Here</h5>
                                            <p>or</p>
                                            <button class="btn btn-primary">Browse Files</button>
                                            <input type="file" id="dashboard-file-input" class="d-none" accept=".pdf">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Note Summarizer -->
                    <div class="dashboard-view" id="summarizer-view">
                        <h2 class="mb-4">Note Summarizer</h2>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Input Your Text</h5>
                                <div class="mb-3">
                                    <textarea class="form-control" id="summarizer-input" rows="8" placeholder="Paste your notes or text here to generate a summary..."></textarea>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Or upload a PDF</label>
                                        <div class="input-group">
                                            <input type="file" class="form-control" id="summarizer-file" accept=".pdf">
                                            <button class="btn btn-outline-secondary" type="button" id="summarizer-file-button">Upload</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Summary Length</label>
                                        <select class="form-select" id="summary-length">
                                            <option value="short">Short (25%)</option>
                                            <option value="medium" selected>Medium (50%)</option>
                                            <option value="long">Long (75%)</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" id="generate-summary-btn">Generate Summary</button>
                            </div>
                        </div>
                        <div class="card" id="summary-result-card" style="display: none;">
                            <div class="card-body">
                                <h5 class="card-title">Summary</h5>
                                <div id="summary-result" class="p-3 border rounded">
                                    <p>This is a prototype. The summary will appear here after connecting to the API.</p>
                                </div>
                                <div class="mt-3">
                                    <button class="btn btn-outline-primary" id="copy-summary-btn"><i class="bi bi-clipboard"></i> Copy</button>
                                    <button class="btn btn-outline-primary ms-2" id="download-summary-btn"><i class="bi bi-download"></i> Download</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Study Chatbot -->
                    <div class="dashboard-view" id="chatbot-view">
                        <h2 class="mb-4">Study Chatbot</h2>
                        <div class="card">
                            <div class="card-body">
                                <div class="chat-container">
                                    <div class="chat-messages" id="chat-messages">
                                        <div class="message bot-message">
                                            <p class="mb-0">Hi there! I'm your AI study assistant. How can I help you today?</p>
                                        </div>
                                    </div>
                                    <div class="chat-input">
                                        <input type="file" id="chat-file-input" class="d-none" accept=".pdf">
                                        <button class="btn btn-outline-primary" id="chat-upload-btn"><i class="bi bi-paperclip"></i></button>
                                        <input type="text" class="form-control" id="chat-input" placeholder="Ask a question...">
                                        <button class="btn btn-primary" id="chat-send-btn"><i class="bi bi-send"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Flashcards -->
                    <div class="dashboard-view" id="flashcards-view">
                        <h2 class="mb-4">Flashcard Generator</h2>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Create Flashcards</h5>
                                <div class="mb-3">
                                    <label class="form-label">Subject or Topic</label>
                                    <input type="text" class="form-control" id="flashcard-topic" placeholder="E.g., Biology, World History, Python Programming">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Study Content</label>
                                    <textarea class="form-control" id="flashcard-content" rows="6" placeholder="Paste your notes, textbook content, or any study material you want to convert to flashcards..."></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Or upload a PDF</label>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="flashcard-file" accept=".pdf">
                                        <button class="btn btn-outline-secondary" type="button" id="flashcard-file-button">Upload</button>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Number of Flashcards</label>
                                    <select class="form-select" id="flashcard-count">
                                        <option value="5">5 cards</option>
                                        <option value="10" selected>10 cards</option>
                                        <option value="15">15 cards</option>
                                        <option value="20">20 cards</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary" id="generate-flashcards-btn">Generate Flashcards</button>
                            </div>
                        </div>
                        <div id="flashcards-container" style="display: none;">
                            <h5 class="mb-3">Your Flashcards</h5>
                            <div class="row g-4" id="flashcards-deck">
                                <div class="col-md-4">
                                    <div class="flashcard">
                                        <div class="flashcard-inner">
                                            <div class="flashcard-front">
                                                <h5>Example Question</h5>
                                                <p class="small">(Click to flip)</p>
                                            </div>
                                            <div class="flashcard-back">
                                                <p>This is a prototype. Flashcards will appear here after connecting to the API.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <button class="btn btn-outline-primary" id="save-flashcards-btn"><i class="bi bi-save"></i> Save Deck</button>
                                <button class="btn btn-outline-primary ms-2" id="print-flashcards-btn"><i class="bi bi-printer"></i> Print</button>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Generator -->
                    <div class="dashboard-view" id="quiz-view">
                        <h2 class="mb-4">Quiz Generator</h2>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Create a Quiz</h5>
                                <div class="mb-3">
                                    <label class="form-label">Subject or Topic</label>
                                    <input type="text" class="form-control" id="quiz-topic" placeholder="E.g., Cell Biology, American Civil War, JavaScript Basics">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Study Content</label>
                                    <textarea class="form-control" id="quiz-content" rows="6" placeholder="Paste your notes, textbook content, or any study material you want to create a quiz from..."></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Or upload a PDF</label>
                                    <div class="input-group">
                                        <input type="file" class="form-control" id="quiz-file" accept=".pdf">
                                        <button class="btn btn-outline-secondary" type="button" id="quiz-file-button">Upload</button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Number of Questions</label>
                                        <select class="form-select" id="quiz-count">
                                            <option value="5">5 questions</option>
                                            <option value="10" selected>10 questions</option>
                                            <option value="15">15 questions</option>
                                            <option value="20">20 questions</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Difficulty Level</label>
                                        <select class="form-select" id="quiz-difficulty">
                                            <option value="easy">Easy</option>
                                            <option value="medium" selected>Medium</option>
                                            <option value="hard">Hard</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" id="generate-quiz-btn">Generate Quiz</button>
                            </div>
                        </div>
                        <div id="quiz-container" style="display: none;">
                        </div>
                    </div>

                    <!-- PDF Upload -->
                    <div class="dashboard-view" id="pdf-view">
                        <h2 class="mb-4">PDF Upload & Processing</h2>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Upload Your PDF</h5>
                                <div class="form-upload" id="pdf-dropzone">
                                    <i class="bi bi-cloud-arrow-up fs-1 mb-2"></i>
                                    <h5>Drag & Drop Your PDF Here</h5>
                                    <p>or</p>
                                    <button class="btn btn-primary">Browse Files</button>
                                    <input type="file" id="pdf-file-input" class="d-none" accept=".pdf">
                                </div>
                                <div id="pdf-info" class="mt-3" style="display: none;">
                                    <div class="alert alert-success d-flex align-items-center" role="alert">
                                        <i class="bi bi-check-circle-fill me-2"></i>
                                        <div>
                                            <span id="pdf-filename"></span> uploaded successfully!
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card" id="pdf-actions" style="display: none;">
                            <div class="card-body">
                                <h5 class="card-title">Choose Action</h5>
                                <p>What would you like to do with this PDF?</p>
                                <div class="row g-3">
                                    <div class="col-md-6 col-xl-3">
                                        <div class="card feature-card h-100">
                                            <div class="card-body text-center p-3">
                                                <i class="bi bi-file-earmark-text feature-icon"></i>
                                                <h5>Summarize</h5>
                                                <button class="btn btn-sm btn-primary mt-2" id="pdf-summarize-btn">Select</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-xl-3">
                                        <div class="card feature-card h-100">
                                            <div class="card-body text-center p-3">
                                                <i class="bi bi-chat-dots feature-icon"></i>
                                                <h5>Ask Questions</h5>
                                                <button class="btn btn-sm btn-primary mt-2" id="pdf-chat-btn">Select</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-xl-3">
                                        <div class="card feature-card h-100">
                                            <div class="card-body text-center p-3">
                                                <i class="bi bi-card-heading feature-icon"></i>
                                                <h5>Create Flashcards</h5>
                                                <button class="btn btn-sm btn-primary mt-2" id="pdf-flashcards-btn">Select</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-xl-3">
                                        <div class="card feature-card h-100">
                                            <div class="card-body text-center p-3">
                                                <i class="bi bi-question-circle feature-icon"></i>
                                                <h5>Generate Quiz</h5>
                                                <button class="btn btn-sm btn-primary mt-2" id="pdf-quiz-btn">Select</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div class="dashboard-view" id="settings-view">
                        <h2 class="mb-4">Settings</h2>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Account Settings</h5>
                                <div class="mb-3">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-control" id="settings-name" value="John Doe">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="settings-email" value="john.doe@example.com">
                                </div>
                                <button class="btn btn-primary" id="save-account-settings">Save Changes</button>
                            </div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Appearance</h5>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-0">Dark Mode</h6>
                                        <p class="text-muted small mb-0">Enable dark mode for reduced eye strain</p>
                                    </div>
                                    <div class="settings-toggle" id="settings-dark-mode">
                                        <div class="toggle-handle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card mb-4">
                            <div class="card-body">
                                <h5 class="card-title">Storage</h5>
                                <p>Manage your uploaded documents and generated content</p>
                                <button class="btn btn-outline-danger" id="clear-storage-btn">Clear All Stored Data</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mobile-toggle" id="mobile-toggle">
                    <i class="bi bi-list"></i>
                </div>
                <div class="overlay" id="sidebar-overlay"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script id="app-script">
        $(document).ready(function() {
            // Update API endpoints for Magic Loops per new Loop IDs
            const apiEndpoints = {
                // Using StudySummary Loop for Note Summarizer:
                summarize: 'https://magicloops.dev/api/loop/62affb5d-2d7f-4649-a056-fd5c373b8f83/run',
                // Using QuizMaker Loop for Quiz Generation:
                quiz: 'https://magicloops.dev/api/loop/6602943e-4f4e-4b0c-b0ac-28621aa3482b/run',
                // Using FlashCardsAPI for Flashcards creation:
                flashcards: 'https://magicloops.dev/api/loop/773805d1-bcb0-4234-bfa2-aedd1b7bbf8e/run',
                // Using StudyQA Loop for the Chatbot:
                chatbot: 'https://magicloops.dev/api/loop/f9dd8d93-3d6c-4874-a3d7-6b0821a0e877/run',
                // Using PDFTextExtract Loop for PDF Processing:
                pdf: 'https://magicloops.dev/api/loop/53ae357d-d8e1-47f3-8845-291d30f638ab/run'
            };

            // Navigation and View Management
            function showView(viewId) {
                $('.view').removeClass('active').hide();
                $('#' + viewId + '-view').addClass('active').show();
                
                // For dashboard view, show the first dashboard tab
                if (viewId === 'dashboard') {
                    $('.dashboard-view').removeClass('active').hide();
                    $('#dashboard-home-view').addClass('active').show();
                    
                    // Update sidebar active link
                    $('.sidebar-link').removeClass('active');
                    $('[data-dashboard-view="dashboard-home"]').addClass('active');
                }
            }
            
            // Handle view navigation
            $('[data-view]').click(function(e) {
                e.preventDefault();
                const viewId = $(this).data('view');
                showView(viewId);
                // Close sidebar on mobile when a link is clicked
                if (window.innerWidth < 992) {
                    $('#sidebar').removeClass('show');
                    $('#sidebar-overlay').removeClass('show');
                }
            });
            
            // Close mobile navigation menu when a nav link is clicked
            $('.navbar-nav .nav-link').click(function() {
                // Check if navbar is expanded (mobile view)
                if (window.innerWidth < 992 && $('#navbarContent').hasClass('show')) {
                    // Collapse the navbar by simulating a click on the navbar toggler
                    $('.navbar-toggler').click();
                    // Alternative approach if the above doesn't work reliably:
                    // $('#navbarContent').removeClass('show');
                    // $('.navbar-toggler').attr('aria-expanded', 'false');
                }
            });

            // Dashboard sub-view navigation - improved version
            $('[data-dashboard-view]').click(function(e) {
                e.preventDefault();
                const dashboardViewId = $(this).data('dashboard-view');
                
                // Hide all dashboard views first
                $('.dashboard-view').removeClass('active').hide();
                
                // Show only the selected view with a fade-in effect
                $('#' + dashboardViewId + '-view').addClass('active').fadeIn(300);
                
                // Update sidebar active link with enhanced styling
                $('.sidebar-link').removeClass('active');
                $(this).addClass('active');
                
                // Close sidebar on mobile when a link is clicked
                if (window.innerWidth < 992) {
                    $('#sidebar').removeClass('show');
                    $('#sidebar-overlay').removeClass('show');
                }
            });
            
            // Mobile sidebar toggle
            $('#mobile-toggle').click(function() {
                $('#sidebar').toggleClass('show');
                $('#sidebar-overlay').toggleClass('show');
            });
            
            $('#sidebar-overlay').click(function() {
                $('#sidebar').removeClass('show');
                $('#sidebar-overlay').removeClass('show');
            });
            
            // Theme toggle
            let darkMode = localStorage.getItem('darkMode') === 'true';
            
            // Update theme toggle for better visual indication in dark mode
            function updateTheme() {
                if (darkMode) {
                    $('body').addClass('dark-mode');
                    $('#theme-toggle i').removeClass('bi-moon-fill').addClass('bi-sun-fill');
                    $('#settings-dark-mode').addClass('active');
                    $('.navbar').addClass('navbar-dark');
                } else {
                    $('body').removeClass('dark-mode');
                    $('#theme-toggle i').removeClass('bi-sun-fill').addClass('bi-moon-fill');
                    $('#settings-dark-mode').removeClass('active');
                    $('.navbar').removeClass('navbar-dark');
                }
            }
            
            updateTheme();
            
            $('#theme-toggle, #settings-dark-mode').click(function() {
                darkMode = !darkMode;
                localStorage.setItem('darkMode', darkMode);
                updateTheme();
            });
            
            // Login / Signup Forms
            $('#login-form').submit(function(e) {
                e.preventDefault();
                const email = $('#login-email').val();
                const password = $('#login-password').val();
                
                // Validate form
                if (!email || !password) {
                    alert('Please fill in all fields.');
                    return;
                }
                
                // This is just simulating login - in a real app, this would call an API
                const userInfo = {
                    name: email.split('@')[0],
                    email: email,
                    isLoggedIn: true
                };
                localStorage.setItem('userInfo', JSON.stringify(userInfo));
                
                updateLoginState(true);
                showView('dashboard');
            });
            
            $('#signup-form').submit(function(e) {
                e.preventDefault();
                const name = $('#signup-name').val();
                const email = $('#signup-email').val();
                const password = $('#signup-password').val();
                const confirmPassword = $('#signup-confirm-password').val();
                
                if (!name || !email || !password || !confirmPassword) {
                    alert('Please fill in all fields.');
                    return;
                }
                
                if (password !== confirmPassword) {
                    alert('Passwords do not match!');
                    return;
                }
                
                const userInfo = {
                    name: name,
                    email: email,
                    isLoggedIn: true
                };
                localStorage.setItem('userInfo', JSON.stringify(userInfo));
                
                updateLoginState(true);
                showView('dashboard');
            });
            
            $('#logout-link').click(function(e) {
                e.preventDefault();
                localStorage.removeItem('userInfo');
                updateLoginState(false);
                showView('landing');
            });
            
            function updateLoginState(isLoggedIn) {
                if (isLoggedIn) {
                    $('#login-nav-item, #signup-nav-item').addClass('d-none');
                    $('#dashboard-nav-item, #logout-nav-item').removeClass('d-none');
                    const userInfo = JSON.parse(localStorage.getItem('userInfo'));
                    $('#user-name').text(userInfo.name);
                    $('#settings-name').val(userInfo.name);
                    $('#settings-email').val(userInfo.email);
                } else {
                    $('#login-nav-item, #signup-nav-item').removeClass('d-none');
                    $('#dashboard-nav-item, #logout-nav-item').addClass('d-none');
                }
            }
            
            const userInfo = localStorage.getItem('userInfo');
            if (userInfo) {
                const parsedUserInfo = JSON.parse(userInfo);
                if (parsedUserInfo && parsedUserInfo.isLoggedIn) {
                    updateLoginState(true);
                }
            }
            
            $('.dashboard-view:not(.active)').hide();
            
            $('[data-view="dashboard"]').click(function() {
                $('.dashboard-view').hide();
                $('#dashboard-home-view').show().addClass('active');
                $('.sidebar-link').removeClass('active');
                $('[data-dashboard-view="dashboard-home"]').addClass('active');
            });
            
            // Summarizer Tool modifications:
            $('#generate-summary-btn').click(function() {
                const text = $('#summarizer-input').val();
                const summaryLength = $('#summary-length').val();
                
                if (!text.trim()) {
                    alert('Please enter some text to summarize.');
                    return;
                }
                
                const button = $(this);
                button.prop('disabled', true);
                button.html('<span class="loading-spinner me-2"></span> Generating...');
                
                fetch(apiEndpoints.summarize, {
                    method: 'POST',
                    body: JSON.stringify({ "content": text })
                })
                .then(res => res.json())
                .then(responseJson => {
                    $('#summary-result').html(`<p>${responseJson.summary}</p>`);
                    $('#summary-result-card').show();
                    button.prop('disabled', false);
                    button.html('Generate Summary');
                })
                .catch(error => {
                    alert("Failed to generate summary. Please try again.");
                    button.prop('disabled', false);
                    button.html('Generate Summary');
                });
            });
            
            $('#copy-summary-btn').click(function() {
                const summaryText = $('#summary-result').text();
                navigator.clipboard.writeText(summaryText).then(() => {
                    const originalText = $(this).html();
                    $(this).html('<i class="bi bi-check"></i> Copied!');
                    setTimeout(() => {
                        $(this).html(originalText);
                    }, 2000);
                });
            });
            
            $('#download-summary-btn').click(function() {
                const summaryText = $('#summary-result').text();
                const blob = new Blob([summaryText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'summary.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            $('#generate-quiz-btn').click(function() {
                const topic = $('#quiz-topic').val();
                const content = $('#quiz-content').val();
                const count = $('#quiz-count').val();
                const difficulty = $('#quiz-difficulty').val();
                
                if (!topic.trim() || !content.trim()) {
                    alert('Please enter a topic and study content.');
                    return;
                }
                
                const button = $(this);
                button.prop('disabled', true);
                button.html('<span class="loading-spinner me-2"></span> Generating...');
                
                fetch(apiEndpoints.quiz, {
                    method: 'POST',
                    body: JSON.stringify({ "content": content })
                })
                .then(res => res.json())
                .then(responseJson => {
                    const quizHtml = responseJson.quiz.map((q, index) => `
                        <div class="quiz-question">
                            <h5>${index + 1}. ${q.question}</h5>
                            <div class="mt-3">
                                ${q.options.map(opt => `
                                    <div class="quiz-option">
                                        <span>${opt}</span>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-2">
                                <button class="btn btn-sm btn-outline-primary reveal-answer-btn" data-answer="${escapeHtml(q.answer)}">Show Answer</button>
                                <div class="quiz-answer text-muted mt-1" style="display:none;">
                                    Correct Answer: <strong>${escapeHtml(q.answer)}</strong>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    $('#quiz-container').html(`
                        <h5 class="mb-3">Your Quiz</h5>
                        <div class="card mb-4">
                            <div class="card-body">
                                ${quizHtml}
                            </div>
                        </div>
                    `);
                    $('#quiz-container').show();
                    button.prop('disabled', false);
                    button.html('Generate Quiz');
                })
                .catch(error => {
                    alert("Failed to generate quiz. Please try again.");
                    button.prop('disabled', false);
                    button.html('Generate Quiz');
                });
            });
            
            $(document).on('click', '.reveal-answer-btn', function() {
                $(this).siblings('.quiz-answer').slideDown();
                $(this).prop('disabled', true).html('Answer Shown');
            });
            
            function sendChatMessage() {
                const message = $('#chat-input').val();
                
                if (!message.trim()) return;
                
                $('#chat-messages').append(`
                    <div class="message user-message">
                        <p class="mb-0">${escapeHtml(message)}</p>
                    </div>
                `);
                
                $('#chat-input').val('');
                scrollChatToBottom();
                
                $('#chat-messages').append(`
                    <div class="message bot-message" id="typing-indicator">
                        <p class="mb-0"><i>Typing...</i></p>
                    </div>
                `);
                
                scrollChatToBottom();
                
                fetch(apiEndpoints.chatbot, {
                    method: 'POST',
                    body: JSON.stringify({
                        "question": message,
                        "context": "User initiated question via chatbot"
                    })
                })
                .then(res => res.json())
                .then(responseJson => {
                    $('#typing-indicator').remove();
                    $('#chat-messages').append(`
                        <div class="message bot-message">
                            <p class="mb-0">${escapeHtml(responseJson.answer)}</p>
                        </div>
                    `);
                    scrollChatToBottom();
                })
                .catch(error => {
                    $('#typing-indicator').remove();
                    $('#chat-messages').append(`
                        <div class="message bot-message">
                            <p class="mb-0">Sorry, I'm having trouble responding right now. Please try again later.</p>
                        </div>
                    `);
                    scrollChatToBottom();
                });
            }
            
            $('#chat-send-btn').click(function() {
                sendChatMessage();
            });
            
            $('#chat-input').keypress(function(e) {
                if (e.which === 13) {
                    sendChatMessage();
                    e.preventDefault();
                }
            });
            
            function escapeHtml(unsafe) {
                return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }
            
            function scrollChatToBottom() {
                const chatMessages = $('#chat-messages');
                chatMessages.scrollTop(chatMessages[0].scrollHeight);
            }
            
            $('#chat-upload-btn').click(function() {
                $('#chat-file-input').click();
            });
            
            $('#chat-file-input').change(function() {
                if (this.files.length > 0) {
                    const fileName = this.files[0].name;
                    $('#chat-messages').append(`
                        <div class="message bot-message">
                            <p class="mb-0">File "${escapeHtml(fileName)}" uploaded successfully. You can now ask questions about this document.</p>
                        </div>
                    `);
                    scrollChatToBottom();
                }
            });
            
            $('#generate-flashcards-btn').click(function() {
                const topic = $('#flashcard-topic').val();
                const content = $('#flashcard-content').val();
                const count = $('#flashcard-count').val();
                
                if (!topic.trim() || !content.trim()) {
                    alert('Please enter a topic and study content.');
                    return;
                }
                
                const button = $(this);
                button.prop('disabled', true);
                button.html('<span class="loading-spinner me-2"></span> Generating...');
                
                fetch(apiEndpoints.flashcards, {
                    method: 'POST',
                    body: JSON.stringify({ "content": content })
                })
                .then(res => res.json())
                .then(responseJson => {
                    const flashcardsHtml = responseJson.flashCards.map(card => `
                        <div class="col-md-4">
                            <div class="flashcard">
                                <div class="flashcard-inner">
                                    <div class="flashcard-front">
                                        <h5>${card.question}</h5>
                                        <p class="small">(Click to flip)</p>
                                    </div>
                                    <div class="flashcard-back">
                                        <p>${card.answer}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    $('#flashcards-deck').html(flashcardsHtml);
                    $('#flashcards-container').show();
                    button.prop('disabled', false);
                    button.html('Generate Flashcards');
                })
                .catch(error => {
                    alert("Failed to generate flashcards. Please try again.");
                    button.prop('disabled', false);
                    button.html('Generate Flashcards');
                });
            });
            
            $(document).on('click', '.flashcard', function() {
                $(this).toggleClass('flipped');
            });
            
            $('#dashboard-dropzone').click(function() {
                $('#dashboard-file-input').click();
            });
            
            $('#dashboard-file-input').change(function() {
                if (this.files.length > 0) {
                    $('.dashboard-view').removeClass('active').hide();
                    $('#pdf-view').addClass('active').show();
                    $('.sidebar-link').removeClass('active');
                    $('[data-dashboard-view="pdf"]').addClass('active');
                    
                    const fileName = this.files[0].name;
                    $('#pdf-filename').text(fileName);
                    $('#pdf-info').show();
                    $('#pdf-actions').show();
                }
            });
            
            $('#pdf-file-input').change(function() {
                if (this.files.length > 0) {
                    const file = this.files[0];
                    const fileName = file.name;
                    $('#pdf-filename').text(fileName);
                    $('#pdf-info').show();
                    $('#pdf-actions').show();
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const fileData = e.target.result;
                        fetch(apiEndpoints.pdf, {
                            method: 'POST',
                            body: JSON.stringify({ "pdfFile": fileData })
                        })
                        .then(res => res.json())
                        .then(responseJson => {
                            console.log("Extracted PDF Content:", responseJson);
                        })
                        .catch(error => {
                            console.error("PDF extraction failed", error);
                        });
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            $('#pdf-summarize-btn').click(function() {
                $('.dashboard-view').removeClass('active').hide();
                $('#summarizer-view').addClass('active').show();
                $('.sidebar-link').removeClass('active');
                $('[data-dashboard-view="summarizer"]').addClass('active');
            });
            
            $('#pdf-chat-btn').click(function() {
                $('.dashboard-view').removeClass('active').hide();
                $('#chatbot-view').addClass('active').show();
                $('.sidebar-link').removeClass('active');
                $('[data-dashboard-view="chatbot"]').addClass('active');
                
                const fileName = $('#pdf-filename').text();
                $('#chat-messages').append(`
                    <div class="message bot-message">
                        <p class="mb-0">PDF "${escapeHtml(fileName)}" has been loaded. You can now ask questions about this document.</p>
                    </div>
                `);
                scrollChatToBottom();
            });
            
            $('#pdf-flashcards-btn').click(function() {
                $('.dashboard-view').removeClass('active').hide();
                $('#flashcards-view').addClass('active').show();
                $('.sidebar-link').removeClass('active');
                $('[data-dashboard-view="flashcards"]').addClass('active');
            });
            
            $('#pdf-quiz-btn').click(function() {
                $('.dashboard-view').removeClass('active').hide();
                $('#quiz-view').addClass('active').show();
                $('.sidebar-link').removeClass('active');
                $('[data-dashboard-view="quiz"]').addClass('active');
            });
            
            $('#save-account-settings').click(function() {
                const name = $('#settings-name').val();
                const email = $('#settings-email').val();
                
                if (!name.trim() || !email.trim()) {
                    alert('Please enter your name and email.');
                    return;
                }
                
                const button = $(this);
                button.prop('disabled', true);
                button.html('<span class="loading-spinner me-2"></span> Saving...');
                
                setTimeout(() => {
                    try {
                        const userInfo = JSON.parse(localStorage.getItem('userInfo'));
                        userInfo.name = name;
                        userInfo.email = email;
                        localStorage.setItem('userInfo', JSON.stringify(userInfo));
                        
                        $('#user-name').text(name);
                        alert('Settings saved successfully!');
                    } catch (error) {
                        alert('An error occurred while saving settings. Please try again.');
                    } finally {
                        button.prop('disabled', false);
                        button.html('Save Changes');
                    }
                }, 1000);
            });
            
            $('#clear-storage-btn').click(function() {
                if (confirm('Are you sure you want to clear all stored data? This cannot be undone.')) {
                    alert('This is a prototype. In the full version, this would clear your saved data.');
                }
            });
            
            ['pdf-dropzone', 'dashboard-dropzone'].forEach(id => {
                const dropzone = document.getElementById(id);
                
                if (dropzone) {
                    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                        dropzone.addEventListener(eventName, preventDefaults, false);
                    });
                    
                    function preventDefaults(e) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                    
                    ['dragenter', 'dragover'].forEach(eventName => {
                        dropzone.addEventListener(eventName, highlight, false);
                    });
                    
                    ['dragleave', 'drop'].forEach(eventName => {
                        dropzone.addEventListener(eventName, unhighlight, false);
                    });
                    
                    function highlight() {
                        dropzone.classList.add('border-primary');
                    }
                    
                    function unhighlight() {
                        dropzone.classList.remove('border-primary');
                    }
                    
                    dropzone.addEventListener('drop', handleDrop, false);
                    
                    function handleDrop(e) {
                        const dt = e.dataTransfer;
                        const files = dt.files;
                        
                        if (files.length > 0) {
                            const fileInput = document.getElementById(id === 'pdf-dropzone' ? 'pdf-file-input' : 'dashboard-file-input');
                            fileInput.files = files;
                            
                            const event = new Event('change', { bubbles: true });
                            fileInput.dispatchEvent(event);
                        }
                    }
                }
            });
            
            function callApi(endpoint, data, successCallback, errorCallback) {
                console.log(`API call to ${endpoint} with data:`, data);
                setTimeout(() => {
                    try {
                        const response = {
                            success: true,
                            message: "This is a prototype. The full functionality will be available after connecting to the API."
                        };
                        if (successCallback) {
                            successCallback(response);
                        }
                    } catch (error) {
                        console.error("API Error:", error);
                        if (errorCallback) {
                            errorCallback(error);
                        } else {
                            alert("An error occurred. Please try again.");
                        }
                    }
                }, 1500);
            }
        });
    </script>
</body>
</html>