<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üå± idea botany ¬∑ grow your thoughts</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(145deg, #102a31 0%, #1d4a4f 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', 'Inter', system-ui, sans-serif;
      padding: 20px;
    }

    /* main greenhouse card */
    .greenhouse {
      max-width: 1300px;
      width: 100%;
      background: rgba(22, 45, 43, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 60px 60px 40px 40px;
      padding: 30px 30px 40px;
      box-shadow: 0 30px 40px -15px #041a1f, inset 0 1px 3px rgba(210, 255, 200, 0.3);
      border: 1px solid #7fc7a0;
    }

    /* header with moisture */
    .garden-header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      color: #e2ffde;
      padding: 0 10px;
    }

    .title-area {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #1c4a47b3;
      padding: 10px 25px 10px 20px;
      border-radius: 60px;
      border: 1px solid #a0e0b6;
    }

    .title-area h1 {
      font-weight: 400;
      font-size: 2.5rem;
      letter-spacing: 1.5px;
      text-shadow: 0 4px 8px #08222b;
    }

    .watering-can {
      background: #3f786b;
      border-radius: 50%;
      width: 55px;
      height: 55px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      box-shadow: 0 6px 0 #1d4a3a, 0 8px 12px black;
      transition: 0.1s ease;
      border: 1px solid #b9f5cf;
    }

    .watering-can:active {
      transform: translateY(6px);
      box-shadow: 0 2px 0 #1d4a3a, 0 5px 10px black;
    }

    /* climate stats */
    .climate-stats {
      display: flex;
      gap: 30px;
      background: #183f3d;
      padding: 12px 30px;
      border-radius: 60px;
      border: 1px solid #b1e6c9;
      font-weight: 500;
      font-size: 1.2rem;
    }

    .stat {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .stat span {
      color: #f7ffb0;
    }

    /* main plot: flex grid for idea-plants */
    .idea-plot {
      background: #2d604bb0;
      border-radius: 50px;
      padding: 35px 25px;
      border: 2px solid #8fc7a2;
      box-shadow: inset 0 0 35px #1c4638, 0 15px 20px -5px #021010;
      margin-bottom: 25px;
      min-height: 400px;
      transition: background 0.3s;
    }

    .plant-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 28px;
      align-items: flex-start;
      justify-content: center;
    }

    /* each idea = living plant */
    .idea-plant {
      width: 200px;
      background: #fedb85; /* fallback */
      border-radius: 80px 80px 40px 40px;
      padding: 30px 18px 25px 18px;
      box-shadow: 0 10px 0 #8b6c42, 0 20px 20px -8px black;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      transition: all 0.15s;
      border: 2px solid #ffe9b6;
      position: relative;
      cursor: grab;
      transform-origin: bottom center;
    }

    .idea-plant:active {
      cursor: grabbing;
    }

    /* plant emoji grows */
    .plant-emoji {
      font-size: 4rem;
      filter: drop-shadow(0 8px 6px #2d412d);
      margin-bottom: 8px;
      transition: 0.2s;
      transform: scale(1);
    }

    .idea-plant:hover .plant-emoji {
      transform: scale(1.1) rotate(2deg);
    }

    /* water level bar (engaging progress) */
    .water-bar-container {
      width: 90%;
      background: #4b3621;
      height: 16px;
      border-radius: 40px;
      margin: 10px 0 8px;
      border: 2px solid #a9845a;
      overflow: hidden;
    }

    .water-fill {
      height: 100%;
      width: 100%; /* dynamic js */
      background: linear-gradient(45deg, #2ba6ff, #70f0d4);
      border-radius: 40px;
      box-shadow: 0 0 6px #a0f0ff;
    }

    .water-value {
      font-size: 0.8rem;
      font-weight: bold;
      background: #00000040;
      padding: 3px 10px;
      border-radius: 40px;
      color: #ebf5d0;
    }

    /* idea text */
    .idea-text {
      font-size: 1rem;
      font-weight: 600;
      color: #112211;
      background: #ffffdd;
      padding: 10px 8px;
      border-radius: 40px;
      width: 100%;
      margin: 6px 0 5px;
      border: 1px solid #b38b40;
      word-break: break-word;
      max-height: 100px;
      overflow-y: auto;
    }

    .idea-text[contenteditable="true"]:focus {
      outline: 3px solid #6bb39b;
      background: #fff9e3;
    }

    /* tiny action buttons */
    .plant-actions {
      display: flex;
      gap: 6px;
      margin-top: 10px;
      width: 100%;
      justify-content: center;
    }

    .plant-btn {
      background: #547a6b;
      border: none;
      color: white;
      font-size: 1.2rem;
      width: 40px;
      height: 40px;
      border-radius: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 0 #1d463a;
      transition: 0.05s linear;
      border: 1px solid #b9ebc7;
    }

    .plant-btn:active {
      transform: translateY(4px);
      box-shadow: 0 1px 0 #1d463a;
    }

    .plant-btn.wilt {
      background: #b15b4b;
      box-shadow: 0 4px 0 #672e21;
    }

    /* empty garden placeholder */
    .empty-garden {
      width: 100%;
      color: #b1efcf;
      font-size: 2.5rem;
      text-align: center;
      padding: 60px 20px;
      background: #2e594b80;
      border-radius: 70px;
      border: 3px dashed #a1d3b2;
      backdrop-filter: blur(3px);
    }

    /* footer ‚Äî seed storage */
    .seed-tray {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 25px;
      background: #1e4740d6;
      border-radius: 60px;
      padding: 15px 30px;
      border: 1px solid #b0e2c0;
    }

    .seed-label {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #fcf5c6;
      font-size: 1.3rem;
    }

    .seed-stats {
      background: #102f2b;
      border-radius: 50px;
      padding: 8px 30px;
      font-weight: 600;
      color: #b9ffc0;
    }

    .plant-btn.large {
      width: auto;
      padding: 0 22px;
      gap: 8px;
      font-size: 1.3rem;
      background: #45946b;
    }

    .plant-btn.large:active {
      transform: translateY(4px);
    }
  </style>
</head>
<body>
  <div class="greenhouse">
    <!-- header with interaction (watering overall) -->
    <div class="garden-header">
      <div class="title-area">
        <h1>üåø IDEA BOTANY</h1>
        <div class="watering-can" id="globalWaterBtn" title="water all plants (restore moisture)">üíß</div>
      </div>
      <div class="climate-stats">
        <div class="stat"><span>üå±</span> <span id="plantCount">0</span> plants</div>
        <div class="stat"><span>üíß</span> <span id="avgMoisture">0</span>% avg</div>
      </div>
    </div>

    <!-- main growing plot -->
    <div class="idea-plot" id="ideaPlot">
      <div class="plant-grid" id="plantGrid">
        <!-- dynamic plants injected -->
        <div class="empty-garden">üå∏ click seed to plant an idea</div>
      </div>
    </div>

    <!-- seed tray / actions -->
    <div class="seed-tray">
      <div class="seed-label">
        <span>ü™¥</span> seed bank
      </div>
      <button class="plant-btn large" id="plantSeedBtn">‚ûï plant new idea</button>
      <div class="seed-stats" id="seedCounter">growing: 0</div>
      <button class="plant-btn wilt" id="pruneAllBtn" title="remove wilted (all plants)">‚úÇÔ∏è prune all</button>
    </div>
  </div>

  <script>
    (function() {
      // ----- engaging gamified brainstorming -----
      // each plant = an idea with water level (0-100). water decreases over time.
      // you can water individually or globally. plants grow (emoji change) at high water.

      const plantGrid = document.getElementById('plantGrid');
      const plantCountSpan = document.getElementById('plantCount');
      const avgMoistureSpan = document.getElementById('avgMoisture');
      const globalWaterBtn = document.getElementById('globalWaterBtn');
      const plantSeedBtn = document.getElementById('plantSeedBtn');
      const pruneAllBtn = document.getElementById('pruneAllBtn');
      const seedCounter = document.getElementById('seedCounter');

      let plants = []; // array of plant objects { id, text, water, emojiStage, color }

      // emoji stages based on water
      const emojiMap = [
        'üå±', // 0-25
        'üåø', // 26-50
        '‚òòÔ∏è', // 51-75
        'üå≥'  // 76-100
      ];

      // color palette for plant backgrounds (sticky-note like)
      const bgColors = ['#feff9c', '#ffccb3', '#c5e0b4', '#b4d9e6', '#e3d7ff', '#fbc8d5'];

      function getEmojiForWater(water) {
        if (water <= 25) return emojiMap[0];
        if (water <= 50) return emojiMap[1];
        if (water <= 75) return emojiMap[2];
        return emojiMap[3];
      }

      // create new plant idea
      function createPlant(text = 'water me ‚úçÔ∏è', water = 100) {
        const id = 'plant_' + Date.now() + '_' + Math.random().toString(36).substring(2, 8);
        const bgColor = bgColors[Math.floor(Math.random() * bgColors.length)];
        return {
          id,
          text: text,
          water: Math.min(100, Math.max(0, water)),
          color: bgColor,
          emojiStage: getEmojiForWater(water)
        };
      }

      // render all plants to grid
      function renderGarden() {
        if (plants.length === 0) {
          plantGrid.innerHTML = '<div class="empty-garden">üå∏ click seed to plant an idea</div>';
          updateStats();
          return;
        }

        let html = '';
        plants.forEach(p => {
          const emoji = getEmojiForWater(p.water);
          const fillWidth = p.water;
          html += `
            <div class="idea-plant" data-id="${p.id}" style="background: ${p.color};">
              <div class="plant-emoji">${emoji}</div>
              <div class="water-bar-container">
                <div class="water-fill" style="width: ${fillWidth}%;"></div>
              </div>
              <div class="water-value">${p.water}%</div>
              <div class="idea-text" contenteditable="true">${p.text}</div>
              <div class="plant-actions">
                <button class="plant-btn" data-action="water" data-id="${p.id}" title="water this idea">üíß</button>
                <button class="plant-btn wilt" data-action="wilt" data-id="${p.id}" title="remove idea">‚úï</button>
              </div>
            </div>
          `;
        });
        plantGrid.innerHTML = html;
        updateStats();

        // attach dynamic listeners to the new buttons & editable fields
        document.querySelectorAll('.plant-btn[data-action="water"]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const id = btn.dataset.id;
            waterPlant(id, 15); // water increases by 15
          });
        });

        document.querySelectorAll('.plant-btn[data-action="wilt"]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const id = btn.dataset.id;
            removePlant(id);
          });
        });

        // content editable update plant text
        document.querySelectorAll('.idea-text').forEach(div => {
          const parentPlant = div.closest('.idea-plant');
          if (!parentPlant) return;
          const plantId = parentPlant.dataset.id;
          div.addEventListener('blur', (e) => {
            const newText = e.target.innerText.trim() || 'empty';
            updatePlantText(plantId, newText);
          });
        });
      }

      // update plant text in array
      function updatePlantText(id, newText) {
        const plant = plants.find(p => p.id === id);
        if (plant) plant.text = newText;
      }

      // water individual plant
      function waterPlant(id, amount = 10) {
        const plant = plants.find(p => p.id === id);
        if (plant) {
          plant.water = Math.min(100, plant.water + amount);
          renderGarden();
        }
      }

      // remove plant
      function removePlant(id) {
        plants = plants.filter(p => p.id !== id);
        renderGarden();
      }

      // add new plant
      function addNewPlant() {
        const newPlant = createPlant('fresh idea ‚ú®', 80); // start with 80%
        plants.push(newPlant);
        renderGarden();
      }

      // global water all
      function waterAll() {
        plants.forEach(p => {
          p.water = Math.min(100, p.water + 10);
        });
        renderGarden();
      }

      // prune (remove) all plants
      function pruneAll() {
        if (plants.length === 0) return;
        if (confirm('üíî remove all idea plants? they will wilt forever')) {
          plants = [];
          renderGarden();
        }
      }

      // update header stats & average moisture
      function updateStats() {
        plantCountSpan.innerText = plants.length;
        seedCounter.innerText = `growing: ${plants.length}`;
        if (plants.length === 0) {
          avgMoistureSpan.innerText = '0';
          return;
        }
        const totalWater = plants.reduce((acc, p) => acc + p.water, 0);
        const avg = Math.round(totalWater / plants.length);
        avgMoistureSpan.innerText = avg;
      }

      // decay simulation: every few seconds water decreases (engaging urgency)
      function startDecayCycle() {
        setInterval(() => {
          if (plants.length === 0) return;
          let changed = false;
          plants.forEach(p => {
            const decay = Math.floor(Math.random() * 6) + 2; // 2-7% decay
            if (p.water > 0) {
              p.water = Math.max(0, p.water - decay);
              changed = true;
            }
          });
          if (changed) {
            renderGarden(); // re-render with new water levels
          }
        }, 4000); // every 4 seconds
      }

      // additional engaging: double click on empty plot to add plant
      document.getElementById('ideaPlot').addEventListener('dblclick', (e) => {
        // only if doubleclick on background (not button or plant)
        if (e.target === document.getElementById('ideaPlot') || e.target.classList.contains('empty-garden')) {
          addNewPlant();
        }
      });

      // event listeners
      globalWaterBtn.addEventListener('click', waterAll);
      plantSeedBtn.addEventListener('click', addNewPlant);
      pruneAllBtn.addEventListener('click', pruneAll);

      // initial demo plants to make it engaging from start
      function initializeDemo() {
        plants.push(createPlant('brainstorm wild', 90));
        plants.push(createPlant('sketch prototype', 45));
        plants.push(createPlant('user test', 70));
        renderGarden();
      }
      initializeDemo();

      // start the decay loop
      startDecayCycle();

      // extra: also listen for changes from content editable (already done via blur)
      // but we also need to keep emoji updated when water changes; it's in render.
      // plus the water bars update.

      // ensure that after any operation stats are updated (render calls updateStats)
    })();
  </script>
</body>
</html>