*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg:#0c0a08;
  --surface:#131109;
  --surface2:#1a1710;
  --border:#2a2618;
  --accent:#c9a84c;
  --accent2:#e8d5a3;
  --red:#c0392b;
  --text:#e8e0d0;
  --muted:#6b6248;
  --radius:14px;
}

html,body{min-height:100vh;background:var(--bg);color:var(--text);font-family:'Crimson Pro',serif;overflow:hidden}

.paper-texture{position:fixed;inset:0;z-index:0;opacity:.03;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Crect width='4' height='4' fill='%23ffffff'/%3E%3Crect width='1' height='1' fill='%23000000'/%3E%3C/svg%3E");pointer-events:none}

.app{position:relative;z-index:1;display:flex;height:100vh;overflow:hidden}

.sidebar{width:240px;flex-shrink:0;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow-y:auto;padding:24px 16px}

.sidebar-brand{display:flex;align-items:center;gap:10px;margin-bottom:28px;padding-bottom:20px;border-bottom:1px solid var(--border)}
.brand-icon{font-size:22px;color:var(--accent)}
.brand-name{font-family:'Playfair Display',serif;font-size:18px;font-weight:900;color:var(--accent);letter-spacing:1px}

.sidebar-nav{display:flex;flex-direction:column;gap:4px;margin-bottom:24px}
.nav-btn{background:none;border:none;color:var(--muted);text-align:left;padding:10px 12px;border-radius:10px;font-size:14px;font-family:'Crimson Pro',serif;cursor:pointer;transition:all .2s}
.nav-btn:hover{background:var(--surface2);color:var(--text)}
.nav-btn.active{background:rgba(201,168,76,.12);color:var(--accent);font-weight:400}

.sidebar-stats{display:flex;gap:8px;margin-bottom:20px}
.sstat{flex:1;background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:10px 6px;text-align:center}
.sstat span{display:block;font-family:'Space Mono',monospace;font-size:16px;font-weight:700;color:var(--accent2)}
.sstat small{font-size:10px;color:var(--muted);font-family:'Space Mono',monospace}

.sidebar-story{margin-bottom:20px}
.sidebar-story label{display:block;font-family:'Space Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--muted);margin-bottom:6px;margin-top:12px}
.sidebar-story input,.sidebar-story select{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:9px 12px;font-family:'Crimson Pro',serif;font-size:14px;color:var(--text);outline:none;transition:border-color .2s}
.sidebar-story input:focus,.sidebar-story select:focus{border-color:var(--accent)}
.sidebar-story input::placeholder{color:var(--muted)}
.sidebar-story select option{background:var(--surface2)}

.sidebar-actions{display:flex;flex-direction:column;gap:8px;margin-top:auto;padding-top:16px;border-top:1px solid var(--border)}
.action-btn{background:var(--accent);color:#000;border:none;border-radius:10px;padding:10px 16px;font-family:'Playfair Display',serif;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;text-align:center}
.action-btn:hover{background:var(--accent2);transform:translateY(-1px)}
.action-btn.ghost{background:transparent;color:var(--muted);border:1px solid var(--border)}
.action-btn.ghost:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-1px)}
.action-btn.danger{background:transparent;color:var(--red);border:1px solid rgba(192,57,43,.3)}
.action-btn.danger:hover{background:rgba(192,57,43,.1);transform:translateY(-1px)}

.main-content{flex:1;overflow:hidden;display:flex;flex-direction:column}

.tab-panel{display:none;flex:1;flex-direction:column;overflow:hidden;padding:32px 40px;animation:fadeIn .3s ease}
.tab-panel.active{display:flex}

.write-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:12px}
.story-display-title{font-family:'Playfair Display',serif;font-size:clamp(24px,4vw,42px);font-weight:900;font-style:italic;color:var(--accent2);line-height:1.2}

.write-toolbar{display:flex;align-items:center;gap:6px}
.tool-btn{background:var(--surface);border:1px solid var(--border);color:var(--muted);width:34px;height:34px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:all .2s;display:grid;place-items:center;font-family:'Space Mono',monospace}
.tool-btn:hover{border-color:var(--accent);color:var(--accent)}
.italic-btn{font-style:italic;font-family:'Playfair Display',serif}
.separator{width:1px;height:24px;background:var(--border);margin:0 4px}

.story-editor{flex:1;background:transparent;border:none;outline:none;font-family:'Crimson Pro',serif;font-size:20px;line-height:1.9;color:var(--text);resize:none;padding:0 0 40px}
.story-editor::placeholder{color:var(--muted);font-style:italic}

.write-footer{display:flex;justify-content:space-between;padding-top:12px;border-top:1px solid var(--border);font-family:'Space Mono',monospace;font-size:11px;color:var(--muted)}

.panel-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px}
.panel-top h2{font-family:'Playfair Display',serif;font-size:28px;font-weight:900;font-style:italic;color:var(--accent2)}
.add-btn{background:rgba(201,168,76,.15);color:var(--accent);border:1px solid rgba(201,168,76,.3);border-radius:10px;padding:9px 18px;font-size:14px;font-family:'Crimson Pro',serif;cursor:pointer;transition:all .2s}
.add-btn:hover{background:rgba(201,168,76,.25)}

.characters-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;overflow-y:auto}
.character-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;position:relative;transition:border-color .2s,transform .2s}
.character-card:hover{border-color:var(--accent);transform:translateY(-2px)}
.char-avatar{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:20px;margin-bottom:12px;font-family:'Space Mono',monospace;font-weight:700;color:#000}
.char-name{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--accent2);margin-bottom:4px}
.char-role{font-size:12px;color:var(--accent);font-family:'Space Mono',monospace;letter-spacing:1px;margin-bottom:8px}
.char-desc{font-size:14px;color:var(--muted);line-height:1.6}
.card-delete{position:absolute;top:12px;right:12px;background:none;border:none;color:var(--muted);font-size:14px;cursor:pointer;padding:4px;border-radius:6px;transition:color .2s}
.card-delete:hover{color:var(--red)}

.scenes-list{display:flex;flex-direction:column;gap:12px;overflow-y:auto}
.scene-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;display:flex;gap:16px;align-items:flex-start;transition:border-color .2s}
.scene-item:hover{border-color:var(--accent)}
.scene-num{font-family:'Playfair Display',serif;font-size:28px;font-weight:900;color:var(--border);line-height:1;flex-shrink:0;width:40px}
.scene-content{flex:1;min-width:0}
.scene-title{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;color:var(--accent2);margin-bottom:4px}
.scene-summary{font-size:14px;color:var(--muted);line-height:1.6}
.scene-status{font-size:11px;font-family:'Space Mono',monospace;padding:3px 8px;border-radius:6px;margin-top:8px;display:inline-block}
.status-planned{background:rgba(201,168,76,.1);color:var(--accent)}
.status-draft{background:rgba(76,201,168,.1);color:#4cc9a8}
.status-done{background:rgba(67,217,140,.1);color:#43d98c}

.prompt-display{margin-bottom:32px}
.prompt-card{background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--accent);border-radius:var(--radius);padding:32px;margin-bottom:16px;min-height:160px;display:flex;flex-direction:column;justify-content:center;transition:all .3s}
.prompt-label{font-family:'Space Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--accent);margin-bottom:16px}
.prompt-text{font-family:'Playfair Display',serif;font-size:22px;font-style:italic;line-height:1.6;color:var(--accent2)}
.prompt-genre{margin-top:12px;font-size:12px;font-family:'Space Mono',monospace;color:var(--muted)}
.use-prompt-btn{background:rgba(201,168,76,.15);color:var(--accent);border:1px solid rgba(201,168,76,.3);border-radius:10px;padding:12px 24px;font-size:15px;font-family:'Crimson Pro',serif;cursor:pointer;transition:all .2s}
.use-prompt-btn:hover{background:rgba(201,168,76,.25)}

.prompt-history h3{font-family:'Playfair Display',serif;font-size:18px;font-weight:700;font-style:italic;color:var(--muted);margin-bottom:12px}
.prompt-history-item{padding:12px 16px;border-left:2px solid var(--border);margin-bottom:8px;font-size:14px;color:var(--muted);font-style:italic;transition:border-color .2s}
.prompt-history-item:hover{border-color:var(--accent);color:var(--text)}

.empty-panel{text-align:center;padding:60px 20px;color:var(--muted);grid-column:1/-1}
.empty-panel div{font-size:40px;margin-bottom:12px}
.empty-panel p{font-size:15px;line-height:1.7;font-style:italic}

.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:100;display:flex;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px)}
.modal{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);padding:32px;width:100%;max-width:480px;animation:fadeIn .3s ease}
.modal h3{font-family:'Playfair Display',serif;font-size:22px;font-weight:900;font-style:italic;color:var(--accent2);margin-bottom:20px}
.modal label{display:block;font-family:'Space Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--muted);margin-bottom:6px;margin-top:14px}
.modal input,.modal textarea,.modal select{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:11px 14px;font-family:'Crimson Pro',serif;font-size:15px;color:var(--text);outline:none;transition:border-color .2s;display:block}
.modal input:focus,.modal textarea:focus,.modal select:focus{border-color:var(--accent)}
.modal input::placeholder,.modal textarea::placeholder{color:var(--muted)}
.modal textarea{min-height:80px;resize:none}
.modal select option{background:var(--surface2)}
.modal-btns{display:flex;gap:10px;margin-top:20px}

.focus-overlay{position:fixed;inset:0;background:#0a0806;z-index:200;display:flex;flex-direction:column}
.focus-header{display:flex;align-items:center;justify-content:space-between;padding:16px 40px;border-bottom:1px solid var(--border)}
.focus-header span{font-family:'Playfair Display',serif;font-size:16px;font-style:italic;color:var(--accent)}
.focus-stats span{font-family:'Space Mono',monospace;font-size:12px;color:var(--muted)}
#exitFocusBtn{background:none;border:1px solid var(--border);color:var(--muted);border-radius:8px;padding:7px 14px;font-size:13px;cursor:pointer;transition:all .2s;font-family:'Crimson Pro',serif}
#exitFocusBtn:hover{border-color:var(--accent);color:var(--accent)}
.focus-editor{flex:1;background:transparent;border:none;outline:none;font-family:'Crimson Pro',serif;font-size:22px;line-height:2;color:var(--text);resize:none;padding:48px clamp(40px,15vw,200px)}
.focus-editor::placeholder{color:var(--muted);font-style:italic}

.hidden{display:none!important}

@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

@media(max-width:768px){
  .sidebar{width:200px}
  .tab-panel{padding:20px}
  .story-editor{font-size:17px}
}
